FROM ghcr.io/sparfenyuk/mcp-proxy:latest

# Install Node + autotask-mcp CLI
RUN apt-get update && apt-get install -y --no-install-recommends \
    ca-certificates curl nodejs npm \
  && npm install -g autotask-mcp \
  && apt-get clean && rm -rf /var/lib/apt/lists/*

EXPOSE 8080

# Expose SSE endpoint and spawn stdio MCP behind it
ENTRYPOINT ["catatonit","--","mcp-proxy"]
CMD ["--host=0.0.0.0","--port=8080","--pass-environment","--","autotask-mcp"]
